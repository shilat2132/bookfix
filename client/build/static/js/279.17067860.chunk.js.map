{"version":3,"file":"static/js/279.17067860.chunk.js","mappings":"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","sources":["pages/comments/AllComments.jsx","webpack://client/./src/styles/comments.module.css?b215","pages/comments/CommentsItems.jsx","webpack://client/./src/styles/form.module.css?d1fe"],"sourcesContent":["import { useState } from \"react\"\r\nimport { Form, useActionData } from \"react-router-dom\"\r\nimport { Comments } from \"./CommentsItems\"\r\n\r\n\r\nconst AllComments = ()=>{\r\nconst action = useActionData()\r\nconst [showForm, setShowForm] = useState(true)\r\n\r\nif(showForm && action && action.comments){\r\n    setShowForm(false)\r\n}\r\n\r\n    \r\n    return (<>\r\n{showForm && <Form method=\"POST\">\r\n    <input placeholder=\"סיסמת מנהל\" type=\"text\" required name=\"secret\"/>\r\n    <button>שלח</button>\r\n    \r\n    {action && action.error && <p className=\"formErrorMessage\">{action.error} </p>}\r\n     </Form>}\r\n\r\n{!showForm && <Comments from=\"admin\" secret={action.secret} comments={action.comments}/> }\r\n        </>\r\n    )\r\n}\r\n\r\nexport const commentsActions = async ({request, params})=>{\r\n    const formData = await request.formData()\r\n    const toDelete = request.method === \"DELETE\"\r\n    const secret = formData.get(\"secret\")\r\n    let url = \"/api/comments\"\r\n    if(toDelete){\r\n        url+= `/${formData.get(\"id\")}`\r\n    }\r\n    url+=`/${secret}`\r\n\r\n\r\n    const response = await fetch(url, {method: toDelete ? \"DELETE\" : \"GET\"})\r\n\r\n    if(!toDelete){\r\n    const responseData = await response.json()\r\n\r\n    if(!response.ok){\r\n        return {error: responseData.message}\r\n    }\r\n\r\n    return {comments: responseData.docs, secret: secret}\r\n    }else{\r\n        if(!response.ok){\r\n            const responseData = await response.json()\r\n            return {error: responseData.message}\r\n        }\r\n    }\r\n    return {success: \"התגובה נמחקה\"}\r\n}\r\n\r\nexport default AllComments","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"comments_title__Dg9zm\",\"subtitle\":\"comments_subtitle__kIYkT\",\"cardBody\":\"comments_cardBody__b1Qvg\",\"row\":\"comments_row__by9fR\",\"cardText\":\"comments_cardText__W7dGZ\",\"commentCard\":\"comments_commentCard__87XkG\",\"commentsSection\":\"comments_commentsSection__s3I5-\",\"titles\":\"comments_titles__RBt+C\"};","import { useFetcher } from \"react-router-dom\"\r\nimport formStyles from '../../styles/form.module.css'\r\nimport Form from 'react-bootstrap/Form';\r\nimport Card from 'react-bootstrap/Card';\r\nimport commentsStyles from '../../styles/comments.module.css'\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport { useState } from 'react';\r\n\r\n\r\nexport const Comments = ({comments, from, secret})=>{\r\n    const fetcher = useFetcher()\r\nif(!comments|| comments.length ===0){\r\n    return <p style={{marginTop: \"unset\"}} className=\"generalMsg\">עדיין לא נוספו תגובות</p>\r\n}\r\n    const fromAdmin = from === \"admin\"\r\n    function deleteComment(id){\r\n        fetcher.submit({id, secret}, { method: \"DELETE\"})\r\n    }\r\n    return(\r\n<div className={`${commentsStyles.row} text-center`}>\r\n    {fetcher.data && fetcher.data.error && <p className=\"errorMessage\">{fetcher.data.error} </p>}\r\n    {fetcher.data && fetcher.data.success && <p className=\"generalMsg\">{fetcher.data.success} </p>}\r\n    <h4 style={{textAlign: \"right\"}}>תגובות</h4>\r\n    <div className={`row `}>\r\n      {comments.map(comment=>(\r\n            <Card key={comment._id} className={`col-xl-4 col-lg-5 col-12 col-sm-5 ${commentsStyles.commentCard}`} >\r\n                <Card.Body className={commentsStyles.cardBody}>\r\n                    <div className={commentsStyles.titles}>\r\n                        <Card.Title className={commentsStyles.title}>{comment.name}</Card.Title>\r\n                        {fromAdmin && <Card.Subtitle className={`${commentsStyles.subtitle} mb-2 text-muted`}>\r\n                            {comment.story.title}</Card.Subtitle>}\r\n                </div>\r\n                <Card.Text className={commentsStyles.cardText}>{comment.text}\r\n                {fromAdmin && comment.email &&<> <br/> <span>{comment.email}</span>  </>}\r\n                 </Card.Text>\r\n                {fromAdmin && <button onClick={e=> deleteComment(comment._id)} className=\"button\">מחיקת תגובה</button> }\r\n            </Card.Body>\r\n          </Card>\r\n      ))}\r\n      \r\n    </div>\r\n</div>\r\n    )\r\n}\r\n\r\nexport function CommentForm(){\r\nconst fetcher = useFetcher()\r\n\r\n function handleSubmit(event){\r\n    event.preventDefault()\r\n    const formData = new FormData(event.target)\r\n    const data ={}\r\n    formData.forEach((value, key)=>{\r\n        data[key] = value\r\n    })\r\n     fetcher.submit(data, {method: \"POST\"})\r\n}\r\n    return(\r\n        <form onSubmit={e=> handleSubmit(e)}>\r\n            <Form.Group className={`mb-3 ${formStyles.formGroup}`}>\r\n                <Form.Label>שם</Form.Label>\r\n                <Form.Control name=\"name\" type=\"text\" required />\r\n            </Form.Group>\r\n\r\n            <Form.Group className={`mb-3 ${formStyles.formGroup}`}>\r\n                <Form.Label>אימייל</Form.Label>\r\n                <Form.Control name=\"email\" type=\"text\" />\r\n            </Form.Group>\r\n\r\n            <Form.Group className={`mb-3 ${formStyles.formGroup}`}>\r\n                <Form.Label>תגובה</Form.Label>\r\n                <Form.Control name=\"text\" as=\"textarea\" required />\r\n            </Form.Group>\r\n            {fetcher.data && fetcher.data.success && <p className=\"successMsg\">{fetcher.data.success}</p>}\r\n            {fetcher.data && fetcher.data.error && <p className=\"formErrorMessage\">{fetcher.data.error}</p>}\r\n            <button className={formStyles.button}>הוספה</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport function CommentsSection({comments}){\r\n    const [show, setShow] = useState(false);\r\n\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\nreturn(\r\n<div className={commentsStyles.commentsSection}>\r\n    <button className=\"button\" onClick={handleShow}>כתבו תגובה</button>\r\n    <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n        <Modal.Title>הוספת תגובה</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body><CommentForm/> </Modal.Body>\r\n    </Modal>\r\n    <Comments comments={comments} from=\"user\"/>\r\n</div>\r\n    )\r\n    \r\n}","// extracted by mini-css-extract-plugin\nexport default {\"formGroup\":\"form_formGroup__aK5wG\",\"button\":\"form_button__nRBFc\",\"deleteBtn\":\"form_deleteBtn__iaFnd\",\"form\":\"form_form__jfdk4\"};"],"names":["commentsActions","async","request","params","_ref","formData","toDelete","method","secret","get","url","concat","response","fetch","responseData","json","ok","comments","docs","error","message","success","AllComments","action","useActionData","showForm","setShowForm","useState","_jsxs","_Fragment","children","Form","_jsx","placeholder","type","required","name","className","Comments","from","fetcher","useFetcher","length","style","marginTop","fromAdmin","commentsStyles","row","data","textAlign","map","comment","Card","commentCard","Body","cardBody","titles","Title","title","Subtitle","subtitle","story","Text","cardText","text","email","onClick","e","deleteComment","id","_id","submit","CommentForm","onSubmit","event","preventDefault","FormData","target","forEach","value","key","handleSubmit","Group","formStyles","formGroup","Label","Control","as","button","CommentsSection","_ref2","show","setShow","commentsSection","handleShow","Modal","onHide","handleClose","Header","closeButton"],"sourceRoot":""}