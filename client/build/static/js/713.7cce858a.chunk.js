"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[713],{6713:(t,e,n)=>{n.r(e),n.d(e,{addCommentAction:()=>s,deleteItemAction:()=>a,itemAction:()=>c});var o=n(8278);const a=async t=>{let{request:e,params:n}=t;const a=n.collection,c=await e.formData(),s="/api/".concat(a,"/").concat(n.id),r=await fetch(s,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:c.get("secret")})});if(!r.ok){return{error:(await r.json()).message}}return(0,o.uX)("/".concat(a))},c=async t=>{let{request:e,params:n}=t;const a=e.method,c=n.collection,s=function(t){const e={};return Object.keys(t).forEach((n=>{t[n]&&t[n].length>0&&(e[n]=t[n])})),e}(Object.fromEntries(await e.formData()));let r="/api/".concat(c);"PATCH"===a&&(r+="/".concat(n.id));const i=await fetch(r,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),m=await i.json();if(!i.ok)return{error:m.message||"something went wrong"};let d="/".concat(c);return d+="/".concat("PATCH"===a?n.id:m.docId),(0,o.uX)(d)},s=async t=>{let{request:e,params:n}=t;const o=Object.fromEntries(await e.formData());o.story=n.id;const a=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),c=await a.json();return a.ok?{success:"\u05d4\u05ea\u05d2\u05d5\u05d1\u05d4 \u05e0\u05d5\u05e1\u05e4\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"}:{error:c.message||"something went wrong"}}}}]);
//# sourceMappingURL=713.7cce858a.chunk.js.map