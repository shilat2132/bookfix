"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[965],{9965:(e,s,t)=>{t.r(s),t.d(s,{commentsActions:()=>m,default:()=>l});var r=t(5043),c=t(3216),n=t(5475),a=t(8693),o=t(579);const m=async e=>{let{request:s,params:t}=e;const r=await s.formData(),c="DELETE"===s.method,n=r.get("secret");let a="/api/comments";c&&(a+=`/${r.get("id")}`),a+=`/${n}`;const o=await fetch(a,{method:c?"DELETE":"GET"});if(!c){const e=await o.json();return o.ok?{comments:e.docs,secret:n}:{error:e.message}}if(!o.ok){return{error:(await o.json()).message}}return{success:"\u05d4\u05ea\u05d2\u05d5\u05d1\u05d4 \u05e0\u05de\u05d7\u05e7\u05d4"}},l=()=>{const e=(0,c.mP)(),[s,t]=(0,r.useState)(!0);return s&&e&&e.comments&&t(!1),(0,o.jsxs)(o.Fragment,{children:[s&&(0,o.jsxs)(n.lV,{method:"POST",children:[(0,o.jsx)("input",{placeholder:"\u05e1\u05d9\u05e1\u05de\u05ea \u05de\u05e0\u05d4\u05dc",type:"text",required:!0,name:"secret"}),(0,o.jsx)("button",{children:"\u05e9\u05dc\u05d7"}),e&&e.error&&(0,o.jsxs)("p",{className:"formErrorMessage",children:[e.error," "]})]}),!s&&(0,o.jsx)(a.Hw,{from:"admin",secret:e.secret,comments:e.comments})]})}},8693:(e,s,t)=>{t.d(s,{Hw:()=>i,C$:()=>x});var r=t(5475),c=t(6593),n=t(3814),a=t(8628);const o={title:"comments_title__D7jqg",subtitle:"comments_subtitle__vA2B7",cardBody:"comments_cardBody__HQx6d",row:"comments_row__32Rwn",cardText:"comments_cardText__Z9SkA",commentCard:"comments_commentCard__QlmRN",commentsSection:"comments_commentsSection__rM01p",titles:"comments_titles__JFAd6"};var m=t(5284),l=t(5043),d=t(579);const i=e=>{let{comments:s,from:t,secret:c}=e;const n=(0,r.Ls)();if(!s||0===s.length)return(0,d.jsx)("p",{style:{marginTop:"unset"},className:"generalMsg",children:"\u05e2\u05d3\u05d9\u05d9\u05df \u05dc\u05d0 \u05e0\u05d5\u05e1\u05e4\u05d5 \u05ea\u05d2\u05d5\u05d1\u05d5\u05ea"});const m="admin"===t;return(0,d.jsxs)("div",{className:`${o.row} text-center`,children:[n.data&&n.data.error&&(0,d.jsxs)("p",{className:"errorMessage",children:[n.data.error," "]}),n.data&&n.data.success&&(0,d.jsxs)("p",{className:"generalMsg",children:[n.data.success," "]}),(0,d.jsx)("h4",{style:{textAlign:"right"},children:"\u05ea\u05d2\u05d5\u05d1\u05d5\u05ea"}),(0,d.jsx)("div",{className:"row ",children:s.map((e=>(0,d.jsx)(a.A,{className:`col-xl-4 col-lg-5 col-12 col-sm-5 ${o.commentCard}`,children:(0,d.jsxs)(a.A.Body,{className:o.cardBody,children:[(0,d.jsxs)("div",{className:o.titles,children:[(0,d.jsx)(a.A.Title,{className:o.title,children:e.name}),m&&(0,d.jsx)(a.A.Subtitle,{className:`${o.subtitle} mb-2 text-muted`,children:e.story.title})]}),(0,d.jsxs)(a.A.Text,{className:o.cardText,children:[e.text,m&&e.email&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)("br",{})," ",(0,d.jsx)("span",{children:e.email}),"  "]})]}),m&&(0,d.jsx)("button",{onClick:s=>{return t=e._id,void n.submit({id:t,secret:c},{method:"DELETE"});var t},className:"button",children:"\u05de\u05d7\u05d9\u05e7\u05ea \u05ea\u05d2\u05d5\u05d1\u05d4"})]})},e._id)))})]})};function u(){const e=(0,r.Ls)();return(0,d.jsxs)("form",{onSubmit:s=>function(s){s.preventDefault();const t=new FormData(s.target),r={};t.forEach(((e,s)=>{r[s]=e})),e.submit(r,{method:"POST"})}(s),children:[(0,d.jsxs)(n.A.Group,{className:`mb-3 ${c.A.formGroup}`,children:[(0,d.jsx)(n.A.Label,{children:"\u05e9\u05dd"}),(0,d.jsx)(n.A.Control,{name:"name",type:"text",required:!0})]}),(0,d.jsxs)(n.A.Group,{className:`mb-3 ${c.A.formGroup}`,children:[(0,d.jsx)(n.A.Label,{children:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"}),(0,d.jsx)(n.A.Control,{name:"email",type:"text"})]}),(0,d.jsxs)(n.A.Group,{className:`mb-3 ${c.A.formGroup}`,children:[(0,d.jsx)(n.A.Label,{children:"\u05ea\u05d2\u05d5\u05d1\u05d4"}),(0,d.jsx)(n.A.Control,{name:"text",as:"textarea",required:!0})]}),e.data&&e.data.success&&(0,d.jsx)("p",{className:"successMsg",children:e.data.success}),e.data&&e.data.error&&(0,d.jsx)("p",{className:"formErrorMessage",children:e.data.error}),(0,d.jsx)("button",{className:c.A.button,children:"\u05d4\u05d5\u05e1\u05e4\u05d4"})]})}function x(e){let{comments:s}=e;const[t,r]=(0,l.useState)(!1);return(0,d.jsxs)("div",{className:o.commentsSection,children:[(0,d.jsx)("button",{className:"button",onClick:()=>r(!0),children:"\u05db\u05ea\u05d1\u05d5 \u05ea\u05d2\u05d5\u05d1\u05d4"}),(0,d.jsxs)(m.A,{show:t,onHide:()=>r(!1),children:[(0,d.jsx)(m.A.Header,{closeButton:!0,children:(0,d.jsx)(m.A.Title,{children:"\u05d4\u05d5\u05e1\u05e4\u05ea \u05ea\u05d2\u05d5\u05d1\u05d4"})}),(0,d.jsxs)(m.A.Body,{children:[(0,d.jsx)(u,{})," "]})]}),(0,d.jsx)(i,{comments:s,from:"user"})]})}},6593:(e,s,t)=>{t.d(s,{A:()=>r});const r={formGroup:"form_formGroup__kmBMA",button:"form_button__BOhvg",deleteBtn:"form_deleteBtn__lwSyp",form:"form_form__IX2UE"}}}]);
//# sourceMappingURL=965.6eb0c456.chunk.js.map